(function(){"use strict";var t={9834:function(t,r,e){var n=e(9242),a=e(3396);function i(t,r,e,n,i,s){const c=(0,a.up)("FormCalcCar");return(0,a.wg)(),(0,a.j4)(c)}const s={class:"form"},c=(0,a._)("h1",{class:"first-title"},"Рассчитайте стоимость автомобиля в лизинг",-1),o={class:"input-container"},u={class:"input-content input-content__button"};function p(t,r,e,n,i,p){const m=(0,a.up)("InputScroll"),l=(0,a.up)("InputScrollPercent"),d=(0,a.up)("ResultComponent"),P=(0,a.up)("CustomButton");return(0,a.wg)(),(0,a.iD)("div",s,[c,(0,a._)("div",o,[(0,a.Wm)(m,{params:i.carPrice},null,8,["params"]),(0,a.Wm)(l,{params:i.firstPay},null,8,["params"]),(0,a.Wm)(m,{params:i.periodLeasing},null,8,["params"]),(0,a.Wm)(d,{title:"Сумма договора лизинга",result:p.sumOrder},null,8,["result"]),(0,a.Wm)(d,{title:"Ежемесячный платёж",result:p.sumMonthPay},null,8,["result"]),(0,a._)("div",u,[(0,a.Wm)(P,{onPreviewButtonWasClicked:p.request,params:i.button},null,8,["onPreviewButtonWasClicked","params"])])])])}var m=e(7139);const l={class:"input-content__inner"},d=["value"],P={class:"input-content__slider"},h=["min","max"];function f(t,r,e,i,s,c){const o=(0,a.Q2)("mask");return(0,a.wg)(),(0,a.iD)("div",{class:(0,m.C_)(["input-content",{notinput:e.params.noInput}])},[(0,a._)("span",null,(0,m.zw)(e.params.title),1),(0,a._)("label",l,[(0,a._)("label",null,(0,m.zw)(e.params.unit),1),(0,a.wy)((0,a._)("input",{value:e.params.priceCar?c.formatting(e.params.priceCar):e.params.period,onKeyup:r[0]||(r[0]=(...t)=>c.setInputValue&&c.setInputValue(...t)),onInput:r[1]||(r[1]=r=>t.$emit("minMaxCount"))},null,40,d),[[o,s.paramsPrice.month?["##"]:["# ### ###"]]])]),(0,a._)("div",P,[(0,a.wy)((0,a._)("input",{type:"range",min:e.params.minPrice?e.params.minPrice:e.params.minPercent,max:e.params.maxPrice?e.params.maxPrice:e.params.maxPercent,"onUpdate:modelValue":r[2]||(r[2]=t=>s.paramsPrice.priceCar=t),style:(0,m.j5)({backgroundSize:c.num}),step:"1"},null,12,h),[[n.nr,s.paramsPrice.priceCar,void 0,{number:!0}]])])],2)}var g={name:"InputScroll",data(){return{paramsPrice:this.params}},props:{params:{minPrice:Number,maxPrice:Number,minPercent:Number,maxPercent:Number,priceCar:Number,title:String,unit:String,period:String,noInput:Boolean,month:String}},computed:{num(){return this.params.maxPrice?(this.params.priceCar-this.params.minPrice)/(this.params.maxPrice-this.params.minPrice)*100+"% 100%":this.params.priceCar/this.params.maxPercent*100+"% 100%"}},methods:{formatting(t){return Math.round(t),String(t).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")},setInputValue(t){let r=Number(t.target.closest("input").value.replaceAll(" ",""));r>this.params.maxPrice&&(r=this.params.maxPrice),r<this.params.minPrice&&(r=this.params.minPrice),this.paramsPrice.priceCar=r}}},v=e(89);const b=(0,v.Z)(g,[["render",f]]);var C=b;const y={class:"input-content"},w={class:"input-content__inner"},_={class:"input-content__inner_percent"},x=["value"],S=["value"],k={class:"input-content__slider"},I=["min","max"];function N(t,r,e,i,s,c){const o=(0,a.Q2)("mask");return(0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("span",null,(0,m.zw)(e.params.title),1),(0,a._)("label",w,[(0,a._)("label",_,[(0,a.wy)((0,a._)("input",{value:s.paramsPrice.unit+"%",onKeyup:r[0]||(r[0]=(...t)=>c.setInputValuePercent&&c.setInputValuePercent(...t))},null,40,x),[[o,["##%"]]])]),(0,a._)("input",{disabled:"",value:c.formatting(c.percent*e.params.priceCar)},null,8,S)]),(0,a._)("div",k,[(0,a.wy)((0,a._)("input",{type:"range",min:e.params.minPercent,max:e.params.maxPercent,"onUpdate:modelValue":r[1]||(r[1]=t=>s.paramsPrice.unit=t),style:(0,m.j5)({backgroundSize:c.num}),step:"1"},null,12,I),[[n.nr,s.paramsPrice.unit,void 0,{number:!0}]])])])}var O={name:"InputScrollPercent",data(){return{paramsPrice:this.params}},props:{params:{minPrice:Number,maxPrice:Number,minPercent:Number,maxPercent:Number,priceCar:Number,title:String,unit:String}},methods:{formatting(t){parseInt(t);let r=String(t);if(r.indexOf(".")){let e=r.split(".");e.length>1&&(t=e[0])}return String(t).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")},setInputValuePercent(t){console.log(t);let r=Number(t.target.closest("input").value.replaceAll(" ","").replaceAll("%",""));r>=this.params.maxPercent&&(r=this.params.maxPercent),r<this.params.minPercent&&(r=this.params.minPercent),this.paramsPrice.unit=r}},computed:{percent(){return this.params.unit/100},num(){return(this.params.unit-10)/(this.params.maxPercent-this.params.minPercent)*100+"%100%"}},watch:{params:function(){console.log(this.params)}}};const j=(0,v.Z)(O,[["render",N]]);var L=j;const W={class:"input-content input-content__result"},D={class:""},M={class:"first-title sub-title"};function V(t,r,e,n,i,s){const c=(0,a.Q2)("mask");return(0,a.wg)(),(0,a.iD)("div",W,[(0,a._)("span",D,(0,m.zw)(e.title),1),(0,a.wy)(((0,a.wg)(),(0,a.iD)("span",M,[(0,a.Uk)((0,m.zw)(e.result.toLocaleString("ru")),1)])),[[c,["# ### ###"]]])])}var z={name:"ResultComponent",data(){return{paramsPrice:this.params}},props:{title:String,result:Number},computed:{},methods:{},watch:{}};const B=(0,v.Z)(z,[["render",V]]);var Z=B;const T={key:0,class:"btn-span-large"};function $(t,r,e,n,i,s){const c=(0,a.up)("LoadingProcess");return(0,a.wg)(),(0,a.iD)("button",{onClick:r[0]||(r[0]=(...t)=>s.onClick&&s.onClick(...t)),class:(0,m.C_)(["btn",[e.params.className,{"btn-disable":e.params.loadingProcess}]])},[0==e.params.loadingProcess?((0,a.wg)(),(0,a.iD)("span",T,"Отправить")):((0,a.wg)(),(0,a.j4)(c,{key:1}))],2)}const A={class:"lds-dual-ring"};function F(t,r){return(0,a.wg)(),(0,a.iD)("div",A)}const Q={},R=(0,v.Z)(Q,[["render",F]]);var U=R,q={name:"CustomButton",components:{LoadingProcess:U},data(){return{paramsList:this.params}},props:{params:{className:String,loadingProcess:Number}},computed:{},methods:{onClick(t){this.$emit("previewButtonWasClicked",t)}}};const K=(0,v.Z)(q,[["render",$]]);var E=K,J={name:"FormCalcCar",components:{InputScrollPercent:L,InputScroll:C,ResultComponent:Z,CustomButton:E},data(){return{carPrice:{minPrice:1e6,maxPrice:6e6,priceCar:33e5,title:"Стоимость автомобиля",unit:"₽"},firstPay:{minPercent:10,maxPercent:60,priceCar:33e5,title:"Первоначальный взнос",unit:13},periodLeasing:{minPrice:1,maxPrice:60,priceCar:60,title:"Срок лизинга",unit:"мес.",month:"m"},button:{className:"w100 btn-large",loadingProcess:!1}}},computed:{sumOrder(){return parseInt(this.initialPay+this.periodLeasing.priceCar*this.sumMonthPay)},initialPay(){return this.firstPay.unit/100*this.carPrice.priceCar},sumMonthPay(){return parseInt((this.carPrice.priceCar-this.initialPay)*(.035*Math.pow(1.035,this.periodLeasing.priceCar)/(Math.pow(1.035,this.periodLeasing.priceCar)-1)))}},methods:{async request(t){console.log(t),this.button.loadingProcess=!0;const r="https://eoj3r7f3r4ef6v4.m.pipedream.net",e=this.carPrice.priceCar,n=this.initialPay,a=this.periodLeasing.priceCar,i={priceCar:e,initPay:n,month:a};await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((t=>t.text())).then((()=>setTimeout((()=>{}),1e3))).catch((t=>{console.log(t)})).finally((()=>{console.log("finally"),setTimeout((()=>{this.button.loadingProcess=!1}),500)}))}},watch:{"carPrice.priceCar":function(){this.firstPay.priceCar=this.carPrice.priceCar}}};const G=(0,v.Z)(J,[["render",p]]);var H=G,X={name:"App",components:{FormCalcCar:H}};const Y=(0,v.Z)(X,[["render",i]]);var tt=Y,rt=e(9414),et=e.n(rt);const nt=(0,n.ri)(tt);nt.use(et()),nt.mount("#app")}},r={};function e(n){var a=r[n];if(void 0!==a)return a.exports;var i=r[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(r,n,a,i){if(!n){var s=1/0;for(p=0;p<t.length;p++){n=t[p][0],a=t[p][1],i=t[p][2];for(var c=!0,o=0;o<n.length;o++)(!1&i||s>=i)&&Object.keys(e.O).every((function(t){return e.O[t](n[o])}))?n.splice(o--,1):(c=!1,i<s&&(s=i));if(c){t.splice(p--,1);var u=a();void 0!==u&&(r=u)}}return r}i=i||0;for(var p=t.length;p>0&&t[p-1][2]>i;p--)t[p]=t[p-1];t[p]=[n,a,i]}}(),function(){e.n=function(t){var r=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(r,{a:r}),r}}(),function(){e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)}}(),function(){var t={143:0};e.O.j=function(r){return 0===t[r]};var r=function(r,n){var a,i,s=n[0],c=n[1],o=n[2],u=0;if(s.some((function(r){return 0!==t[r]}))){for(a in c)e.o(c,a)&&(e.m[a]=c[a]);if(o)var p=o(e)}for(r&&r(n);u<s.length;u++)i=s[u],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(p)},n=self["webpackChunkcalc_test"]=self["webpackChunkcalc_test"]||[];n.forEach(r.bind(null,0)),n.push=r.bind(null,n.push.bind(n))}();var n=e.O(void 0,[998],(function(){return e(9834)}));n=e.O(n)})();
//# sourceMappingURL=app.2d08a96b.js.map